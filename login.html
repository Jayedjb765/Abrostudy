<!doctype html>
<html lang="en">

  <head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>AbroStudy</title>

    <link rel = "icon" href = "/assets/logo_new.svg" type = "image/x-icon">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi" crossorigin="anonymous">
    <link rel="stylesheet" href="style.css">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.carousel.min.css"
    integrity="sha512-tS3S5qG0BlhnQROyJXvNjeEM4UpMXHrQfTGmbQ1gKmelCxlSEBUaxhRBj/EFTzpbP4RVSrpEikbmdJobCvhE3g=="
    crossorigin="anonymous" />
<link rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.theme.default.min.css"
    integrity="sha512-sMXtMNL1zRzolHYKEujM2AqCLUR9F2C4/05cdbxjjLSRvMQIciEPCQZo++nk7go3BtSuK9kfa/s+a4f4i5pLkw=="
    crossorigin="anonymous" />

    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
    

    </head>

    <body>

      <nav class=" navbar navbar-expand-lg navbar-dark fixed-top" style="background-color:#e2e7e8; background-image: url('/assets/back.jpg'); background-size: 100%;">
            <div class="container">
          <a href="index.html" class="navbar-brand">
            <img src="/assets/logo_new.svg" alt="" width="50" height="30" class="d-inline-block align-text-top">AbroStudy</a>  
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navmenu">
            <span class="navbar-toggler-icon"></span>
          </button>

          <div class="collapse navbar-collapse" id="navmenu">
           

            <ul class="navbar-nav ms-auto">
               
                <li class="nav-item">
                    <a href="registration.html" class="nav-link">Register Instead</a>
                </li>
                
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                      More
                    </a>
                    <ul class="dropdown-menu">
                      <li><a class="dropdown-item" href="#">View all Universities</a></li>
                      <li><a class="dropdown-item" href="#">View all Countries</a></li>
                      <li><a class="dropdown-item" href="#guidance">View Guidances</a></li>
                      <li><a class="dropdown-item" href="#questions">FAQs</a></li>
                    </ul>
                  </li>
            </ul> 
          </div>

        </div>
        </nav>

        <!-- <section class="p-5 mt-5">
    <div class="container">
        <div class="row">
            <div class="col-sm-4 offset-sm-4">
                <h1>Login</h1>
                <form action="login" method="POST">
                    <div class="mb-3">
                        @csrf
                        <label for="exampleInputEmail1" class="form-label">Email address</label>
                        <input type="email" name="email" class="form-control" id="exampleInputEmail1" aria-describedby="emailHelp">
                        <div id="emailHelp" class="form-text">We'll never share your email with anyone else.</div>
                    </div>
                    <div class="mb-3">
                        <label for="exampleInputPassword1" class="form-label">Password</label>
                        <input type="password" name="password" class="form-control" id="exampleInputPassword1">
                    </div>
                    
                    <button type="submit" class="btn btn-primary">Login</button>
                </form>
            </div>
        </div>
    </div>
</section> -->

<section class="vh-100" style="background-color: #ffff;">
  <div class="container h-100">
    <div class="row d-flex justify-content-center align-items-center h-100">
      <div class="col-lg-12 col-xl-11">
        <div class="card text-black" style="border-radius: 25px;">
          <div class="card-body p-md-5">
            <div class="row justify-content-center">
              <div class="col-md-10 col-lg-6 col-xl-5 order-2 order-lg-1">

                <p class="text-center h1 fw-bold mb-5 mx-1 mx-md-4 mt-4">Login</p>

                

                  <div class="d-flex flex-row align-items-center mb-4">
                 
                    <i class="fas fa-user fa-lg me-3 fa-fw"></i>
                    <div class="form-outline flex-fill mb-0">
                      <input type="text" name="username" id="userInp" class="form-control" />
                      <label class="form-label" for="userInp">Username</label>
                    </div>
                  </div>

                  <div class="d-flex flex-row align-items-center mb-4">
                    <i class="fas fa-lock fa-lg me-3 fa-fw"></i>
                    <div class="form-outline flex-fill mb-0">
                      <input type="password" name="password" id="passInp" class="form-control"/>
                      <label class="form-label" for="passInp">Password</label>
                     
                    </div>
                  </div>

                  <div class="form-check form-switch mx-3">
                    <input class="form-check-input" type="checkbox" role="switch" id="customSwitch1">
                    <label class="form-check-label" for="customSwitch1">Keep me Logged in</label>
                  </div>

                  <div class="d-flex justify-content-center mx-4 mb-3 mt-3 mb-lg-4">
                    <button type="text" id="sub_btn" class="btn btn-primary btn-lg">Login</button>
                  </div>

                </form>

              </div>
              <div class="col-md-10 col-lg-6 col-xl-7 d-flex align-items-center order-1 order-lg-2">

                <img src="/assets/login.png"
                  class="img-fluid" alt="Login image">

              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>


</section>


  <script type="module">
  // Import the functions you need from the SDKs you need
  import { initializeApp } from "https://www.gstatic.com/firebasejs/9.15.0/firebase-app.js";
  import { getAnalytics } from "https://www.gstatic.com/firebasejs/9.15.0/firebase-analytics.js";
  // TODO: Add SDKs for Firebase products that you want to use
  // https://firebase.google.com/docs/web/setup#available-libraries

  // Your web app's Firebase configuration
  // For Firebase JS SDK v7.20.0 and later, measurementId is optional
  const firebaseConfig = {
    apiKey: "AIzaSyDyAEJ9gHZ7jWcwRO6vEAXAZyH0Sji4ugo",
    authDomain: "abrostudy-b0a9d.firebaseapp.com",
    databaseURL: "https://abrostudy-b0a9d-default-rtdb.asia-southeast1.firebasedatabase.app",
    projectId: "abrostudy-b0a9d",
    storageBucket: "abrostudy-b0a9d.appspot.com",
    messagingSenderId: "94537434487",
    appId: "1:94537434487:web:813c35a7092f542036cd72",
    measurementId: "G-BCF6VYN4CG"
  };

  // Initialize Firebase
  const app = initializeApp(firebaseConfig);

  import {getDatabase, ref, set, child, get} from "https://www.gstatic.com/firebasejs/9.15.0/firebase-database.js";
  const db = getDatabase();
  const analytics = getAnalytics(app);



    
    const username = document.getElementById('userInp');
    const pass= document.getElementById('passInp');
    const submit = document.getElementById('sub_btn');


      function AuthenticateUser()
      {
            const dbRef= ref(db);

            get(child(dbRef, "Users/"+ username.value)).then((snapshot)=>{
            if(snapshot.exists())
            {
              let dbpass= decPass(snapshot.val().password);
              if(dbpass==pass.value)
              {
                login(snapshot.val());
              }

              else
              {
                alert("user does not exist");
              }
            }
            else
            {
             alert("username or password is invalid");
             
            }
        });

      }
      

      // DECRYPT PASSWORD
      
      function decPass(dbpass)
          {
            var pass12 = CryptoJS.AES.decrypt(dbpass,pass.value);
            return pass12.toString(CryptoJS.enc.Utf8);
          }
          

      // login

      function login(user)
      {
        let keepLoggedIn=document.getElementById('customSwitch1').checked;

        if(!keepLoggedIn)
        {
          sessionStorage.setItem('user',JSON.stringify(user));
          window.location="index.html";
        }
        else
        {
          localStorage.setItem('keepLoggedIn','yes');  //permanent storage
          localStorage.setItem('user',JSON.stringify(user));
          window.location="index.html";
        }
      }

      submit.addEventListener('click',AuthenticateUser);

      </script>


          <section>
            <div class="footer">
              <div class="inner_footer">
                <div class="lg_container">
            <img src="/assets/logo_new.svg">
        
                </div>
                <div class="footer_third">
                  <h1>Need Help?</h1>
                  <a href="#">Terms &amp; Conditions</a>
                  <!-- <a href="">Privacy Policy</a> -->
                  <a href="#">Contact Us</a>
                </div>
              <div class="footer_third">
                  <span>
                     Â© AbroStudy 2022<br><br>
                     AbroStudy Corporation<br>
                     One Study Way<br>
                     Redmond, WA 98052-6399
                     USA
                  </span>
              </div>
        
              <div class="footer_third">
                <h1>Follow us</h1>
                <a href="">Facebook</a>
                <a href="">Instagram</a>
                <a href="">Twitter</a>
              </div>
           </div>
        </div>
        
        </section>


   

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-OERcA2EqjJCMA+/3y+gxIOqMEjwtxJY7qPCqsdltbNJuaOe923+mo//f6V8Qbsw3" crossorigin="anonymous"></script>
    
    
<script src="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/owl.carousel.min.js"
    integrity="sha512-bPs7Ae6pVvhOSiIcyUClR7/q2OAsRiovw4vAkX+zJbw3ShAeeqezq50RIIcIURq7Oa20rW2n2q+fyXBNcU9lrw=="
    crossorigin="anonymous"></script>
<script>
    $('.owl-carousel').owlCarousel({
        loop: true,
        margin: 15,
        nav: true,
        responsive: {
            0: {
                items: 1
            },
            600: {
                items: 2
            },
            1000: {
                items: 3
            }
        }
    })
</script>



</body>

    </html>